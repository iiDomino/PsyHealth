<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.5, user-scalable=yes">
    <title>è‰¾æ£®å…‹äººæ ¼é—®å· EPQ (å¯†ç ä¿æŠ¤ç»“æœ)</title>
    <!-- å¼•å…¥ html2canvas ç”¨äºæˆªå›¾ -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        * {
            box-sizing: border-box;
            font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', sans-serif;
        }
        body {
            background: #eef3f7;
            margin: 0;
            padding: 12px;
            display: flex;
            justify-content: center;
            min-height: 100vh;
            align-items: center;
        }
        .container {
            max-width: 750px;
            width: 100%;
            background: white;
            border-radius: 32px;
            box-shadow: 0 25px 50px rgba(0,30,50,0.2);
            padding: 24px 20px;
            border: 1px solid #cfdeed;
        }
        h1 {
            font-size: 1.8rem;
            font-weight: 600;
            margin: 0 0 8px 0;
            color: #123a5e;
            letter-spacing: -0.01em;
            border-left: 6px solid #4c8bb8;
            padding-left: 16px;
        }
        .guide {
            background: #f2f8ff;
            border: 1px solid #bdd6ec;
            border-radius: 24px;
            padding: 14px 20px;
            margin-bottom: 24px;
            color: #103f62;
            font-size: 0.94rem;
            box-shadow: 0 4px 8px #d9e6f2;
        }

        /* å•é¢˜å¡ç‰‡ */
        .question-card {
            background: #f9fcff;
            border: 2px solid #c7ddf5;
            border-radius: 40px;
            padding: 28px 20px;
            margin: 16px 0 24px;
            box-shadow: 0 20px 30px #d2e3f0;
        }
        .q-num-large {
            font-size: 1.2rem;
            color: #1e6fa5;
            font-weight: 600;
            margin-bottom: 14px;
            background: #e2effb;
            display: inline-block;
            padding: 6px 20px;
            border-radius: 40px;
        }
        /* é¢˜ç›®æ–‡æœ¬å›ºå®šä¸ºä¸¤è¡Œï¼Œè¶…å‡ºçœç•¥ï¼Œç§»åŠ¨ç«¯ç¼©å°å­—å· */
        .q-text-large {
            font-size: 1.5rem;
            font-weight: 600;
            color: #0b2b45;
            line-height: 1.4;
            margin-bottom: 25px;
            word-break: break-word;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
            text-overflow: ellipsis;
            min-height: calc(1.5rem * 1.4 * 2);
            max-height: calc(1.5rem * 1.4 * 2);
        }
        .options-row {
            display: flex;
            gap: 20px;
            justify-content: center;
            flex-wrap: wrap;
            margin: 20px 0 10px;
        }
        .options-row label {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.3rem;
            font-weight: 600;
            color: #154a73;
            background: #ffffff;
            padding: 14px 36px;
            border-radius: 60px;
            border: 2px solid #aac9e9;
            box-shadow: 0 6px 0 #9bb5d0;
            transition: 0.1s ease;
            cursor: pointer;
        }
        .options-row label:has(input:checked) {
            background: #d1e5ff;
            border-color: #1f6e9e;
            box-shadow: 0 3px 0 #1f6e9e;
            transform: translateY(3px);
        }
        input[type="radio"] {
            width: 22px;
            height: 22px;
            accent-color: #1f6e9e;
        }
        .nav-panel {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-top: 20px;
        }
        .nav-btn {
            background: white;
            border: 2px solid #1f6e9e;
            color: #1f6e9e;
            font-weight: 700;
            padding: 10px 24px;
            border-radius: 40px;
            font-size: 1rem;
            cursor: pointer;
            transition: 0.15s;
            box-shadow: 0 4px 8px #c7ddf5;
            min-width: 100px;
        }
        .nav-btn:disabled {
            opacity: 0.4;
            border-color: #a5b8ca;
            color: #7f99b0;
            pointer-events: none;
            box-shadow: none;
        }
        .nav-btn:hover:not(:disabled) {
            background: #1f6e9e;
            color: white;
        }
        .action-bar {
            display: flex;
            justify-content: center;
            margin: 20px 0 5px;
        }
        .reset-btn {
            background: #ffffff;
            border: 2px solid #9bb7d4;
            color: #2f546e;
            padding: 10px 28px;
            border-radius: 40px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
        }
        .reset-btn:hover {
            background: #ecf5fc;
        }

        /* å¯†ç éªŒè¯å¡ç‰‡ */
        .password-card {
            background: #fff8e7;
            border: 2px solid #f0b87b;
            border-radius: 40px;
            padding: 28px 20px;
            margin: 16px 0 24px;
            box-shadow: 0 20px 30px #ecd9c0;
            text-align: center;
        }
        .password-card h3 {
            font-size: 1.6rem;
            color: #a35f2a;
            margin: 0 0 20px;
        }
        .password-input {
            width: 90%;
            max-width: 400px;
            padding: 16px 20px;
            font-size: 1.2rem;
            border: 2px solid #d49c5b;
            border-radius: 60px;
            margin-bottom: 20px;
            text-align: center;
            background: white;
        }
        .password-btn {
            background: #e58e3a;
            border: none;
            color: white;
            font-weight: 700;
            padding: 14px 40px;
            border-radius: 60px;
            font-size: 1.2rem;
            cursor: pointer;
            border-bottom: 4px solid #9f601f;
            transition: 0.1s;
        }
        .password-btn:active {
            transform: translateY(4px);
            border-bottom-width: 1px;
        }
        .password-error {
            color: #c0392b;
            font-weight: 600;
            margin-top: 16px;
            font-size: 1rem;
        }

        /* ç»“æœé¢æ¿ */
        .result-panel {
            background: linear-gradient(145deg, #f0f7fe, #ffffff);
            border-radius: 32px;
            padding: 20px 18px;
            margin-top: 24px;
            border: 2px solid #c7dcf2;
            box-shadow: 0 12px 20px #d2e2f0;
        }
        #captureArea {
            /* æˆªå›¾åŒºåŸŸæ— é¢å¤–æ ·å¼ */
        }
        .scores {
            display: flex;
            flex-wrap: wrap;
            gap: 16px 16px;
            justify-content: center;
            margin-bottom: 20px;
        }
        .score-card {
            background: #ffffffd6;
            border-radius: 40px;
            padding: 12px 18px;
            min-width: 120px;
            text-align: center;
            border: 1px solid #9ac2e3;
            box-shadow: 0 4px 10px #bdd2e9;
        }
        .score-label {
            font-size: 1.3rem;
            font-weight: 700;
            color: #103455;
        }
        .score-value {
            font-size: 2.5rem;
            font-weight: 800;
            color: #1b6ca1;
            line-height: 1.2;
        }
        .datetime-info {
            text-align: center;
            font-size: 1rem;
            color: #2b5f7a;
            margin: 8px 0 16px;
            padding: 8px 16px;
            background: #e1f0fa;
            border-radius: 40px;
            display: inline-block;
            width: auto;
            margin-left: auto;
            margin-right: auto;
        }
        .interpret {
            background: #e5f0fa;
            border-radius: 24px;
            padding: 18px 20px;
            font-size: 0.98rem;
            color: #01233b;
            border-left: 5px solid #266fa1;
            line-height: 1.5;
        }
        .warning {
            color: #b13e3e;
            font-weight: 600;
            background: #ffeae5;
            border-radius: 30px;
            padding: 8px 16px;
            display: inline-block;
            margin-top: 12px;
        }
        .screenshot-btn {
            background: #2b7a4d;
            border: none;
            color: white;
            font-weight: 700;
            padding: 12px 28px;
            border-radius: 60px;
            font-size: 1.1rem;
            cursor: pointer;
            box-shadow: 0 5px 0 #1b4f32;
            transition: 0.1s;
            border: 1px solid #a3d8b0;
            margin-top: 10px;
        }
        .screenshot-btn:active {
            transform: translateY(4px);
            box-shadow: 0 1px 0 #1b4f32;
        }
        .footnote {
            margin-top: 20px;
            font-size: 0.85rem;
            color: #4d708b;
            text-align: right;
            border-top: 1px dashed #b2cee8;
            padding-top: 14px;
        }
        .hidden {
            display: none !important;
        }

        /* ç§»åŠ¨ç«¯ä¼˜åŒ– */
        @media (max-width: 600px) {
            body { padding: 8px; }
            .container { padding: 18px 12px; border-radius: 28px; }
            h1 { font-size: 1.6rem; border-left-width: 4px; padding-left: 12px; }
            .guide { padding: 12px 16px; font-size: 0.9rem; border-radius: 20px; }

            .question-card { padding: 22px 14px; border-radius: 32px; }
            .q-num-large { font-size: 1rem; padding: 5px 16px; }
            .q-text-large { font-size: 1.3rem; margin-bottom: 20px; min-height: calc(1.3rem * 1.4 * 2); }

            .options-row { flex-direction: column; align-items: stretch; gap: 12px; }
            .options-row label { justify-content: center; padding: 14px 20px; font-size: 1.2rem; }

            .nav-panel { gap: 8px; }
            .nav-btn { padding: 8px 16px; min-width: 80px; font-size: 0.95rem; }

            .password-card { padding: 22px 14px; }
            .password-card h3 { font-size: 1.4rem; }
            .password-input { padding: 14px 16px; font-size: 1rem; }
            .password-btn { padding: 12px 30px; font-size: 1.1rem; }

            .result-panel { padding: 16px 12px; }
            .scores { gap: 12px; }
            .score-card { padding: 8px 12px; min-width: 100px; }
            .score-label { font-size: 1.1rem; }
            .score-value { font-size: 2rem; }
            .datetime-info { font-size: 0.9rem; padding: 6px 12px; }
            .interpret { padding: 14px 16px; font-size: 0.9rem; }
            .screenshot-btn { padding: 10px 24px; font-size: 1rem; }

            .reset-btn { padding: 8px 24px; }
        }
    </style>
</head>
<body>
<div class="container" id="app">
    <h1>è‰¾æ£®å…‹äººæ ¼é—®å·</h1>
    <div class="guide">
        <strong>ğŸ§­ æŒ‡å¯¼è¯­ï¼š</strong> è¯·æ ¹æ®ç¬¬ä¸€ååº”å›ç­”ï¼Œæ¯é¢˜é€‰æ‹©â€œæ˜¯â€æˆ–â€œå¦â€åä¼šè‡ªåŠ¨è¿›å…¥ä¸‹ä¸€é¢˜ã€‚
    </div>

    <!-- å•é¢˜åŒºåŸŸ (åˆå§‹æ˜¾ç¤º) -->
    <div id="singleQuestionContainer">
        <div class="question-card">
            <div class="q-num-large" id="questionNumber">ç¬¬ 1 / 85 é¢˜</div>
            <div class="q-text-large" id="questionText">åŠ è½½ä¸­...</div>
            <div class="options-row" id="optionsRow">
                <label><input type="radio" name="single" value="yes"> æ˜¯</label>
                <label><input type="radio" name="single" value="no"> å¦</label>
            </div>
            <div class="nav-panel">
                <button class="nav-btn" id="prevBtn" disabled>â—€ ä¸Šä¸€é¢˜</button>
                <button class="nav-btn" id="nextBtn" disabled>ä¸‹ä¸€é¢˜ â–¶</button>
            </div>
        </div>
    </div>

    <!-- å¯†ç éªŒè¯å¡ç‰‡ (åˆå§‹éšè—) -->
    <div id="passwordContainer" class="password-card hidden">
        <h3>ğŸ” è¯·è¾“å…¥å¯†ç æŸ¥çœ‹ç»“æœ</h3>
        <input type="password" id="passwordInput" class="password-input" placeholder="è¾“å…¥å¯†ç " autocomplete="off">
        <button class="password-btn" id="submitPasswordBtn">ç¡®è®¤</button>
        <div id="passwordError" class="password-error"></div>
    </div>

    <!-- ç»“æœé¢æ¿ (åˆå§‹éšè—) åŒ…å«æˆªå›¾åŒºåŸŸå’ŒæŒ‰é’® -->
    <div id="resultPanel" class="result-panel hidden">
        <!-- æˆªå›¾åŒºåŸŸï¼šåŒ…å«æ‰€æœ‰è¦æˆªå›¾çš„å†…å®¹ -->
        <div id="captureArea">
            <div class="scores" id="scoreCards"></div>
            <div class="datetime-info" id="datetimeDisplay"></div>
            <div class="interpret" id="interpretText"></div>
            <div id="extraWarning" class="warning"></div>
        </div>
        <!-- æˆªå›¾æŒ‰é’®ï¼ˆä¸åŒ…å«åœ¨æˆªå›¾åŒºåŸŸå†…ï¼‰ -->
        <div style="text-align: center; margin-top: 16px;">
            <button class="screenshot-btn" id="screenshotBtn">ğŸ“¸ æˆªå›¾ä¿å­˜ç»“æœ</button>
        </div>
    </div>

    <!-- åº•éƒ¨é‡ç½®æŒ‰é’® -->
    <div class="action-bar">
        <button class="reset-btn" id="resetBtn">âŸ² é‡æ–°å¼€å§‹æµ‹è¯„</button>
    </div>

    <!-- é¡µè„šï¼šä»…ä¿ç•™è®¡åˆ†è¯´æ˜ -->
    <div class="footnote">
        * è®°åˆ†è§„åˆ™ä¾æ®ã€Šè‰¾æ£®å…‹äººæ ¼é—®å·[æˆäºº85é¢˜]ã€‹ã€‚å¼€å‘è€…ï¼šDOMINO
    </div>
</div>

<script>
(function() {
    // ----- é¢„è®¾å¯†ç  -----
    const RESULT_PASSWORD = "1234";

    // ----- å…¨éƒ¨85é¢˜é¢˜å¹² -----
    const questions = [
        "ä½ æ˜¯å¦æœ‰å¹¿æ³›çš„çˆ±å¥½",
        "å†åšä»»ä½•äº‹æƒ…ä¹‹å‰ä½ æ˜¯å¦éƒ½è¦å…ˆè€ƒè™‘ä¸€ç•ª",
        "ä½ çš„æƒ…ç»ªæ—¶å¸¸æ³¢åŠ¨ä¹ˆï¼Ÿ",
        "å½“åˆ«äººåšäº†å¥½äº‹å‘¨å›´äººå´è®¤ä¸ºæ˜¯ä½ åšçš„ï¼Œä½ æ˜¯å¦æ„Ÿåˆ°æ´‹æ´‹å¾—æ„ï¼Ÿ",
        "ä½ æ˜¯ä¸€ä¸ªå¥è°ˆçš„äººå—ï¼Ÿ",
        "ä½ æ›¾ç»æ— ç¼˜æ— æ•…çš„æ„Ÿåˆ°è‡ªå·±å¯æ€œå—ï¼Ÿ",
        "ä½ æ›¾ç»æœ‰è¿‡å› ä¸ºè´ªå¿ƒè€Œè·å¾—åˆ†å¤–çš„ç‰©è´¨åˆ©ç›Šå—ï¼Ÿ",
        "æ™šä¸Šä½ æ˜¯å¦ä¼šå°å¿ƒçš„æŠŠé—¨é”å¥½ï¼Ÿ",
        "ä½ è®¤ä¸ºè‡ªå·±æ´»æ³¼å—ï¼Ÿ",
        "å½“ä½ çœ‹åˆ°å°å­©æˆ–ï¼ˆåŠ¨ç‰©ï¼‰å—æŠ˜ç£¨æ—¶æ˜¯å¦ä¼šæ„Ÿåˆ°å¾ˆéš¾å—ï¼Ÿ",
        "ä½ æ˜¯å¦æ—¶å¸¸æ‹…å¿ƒä½ ä¼šè¯´å‡ºï¼ˆæˆ–åšå‡ºï¼‰ä¸åº”è¯¥è¯´ï¼ˆæˆ–åšï¼‰çš„äº‹æƒ…ï¼Ÿ",
        "è‹¥ä½ è¯´è¿‡è¦åšæŸä»¶äº‹ï¼Œæ˜¯å¦ä¸ç®¡é‡åˆ°ä»€ä¹ˆå›°éš¾éƒ½è¦æŠŠå®ƒåšæˆï¼Ÿ",
        "åœ¨æ„‰å¿«çš„èšä¼šä¸­ï¼Œä½ æ˜¯å¦å°½æƒ…äº«å—ï¼Ÿ",
        "ä½ æ˜¯ä¸€ä½æ˜“æ¿€æ€’çš„äººå—ï¼Ÿ",
        "ä½ æ˜¯å¦æœ‰è¿‡è‡ªå·±åšé”™äº†äº‹åå€’è´£å¤‡åˆ«äººçš„æ—¶å€™ï¼Ÿ",
        "ä½ å–œæ¬¢ä¼šè§é™Œç”Ÿäººä¹ˆï¼Ÿ",
        "ä½ æ˜¯å¦ç›¸ä¿¡å‚åŠ å‚¨è“„æ˜¯ä¸€ç§å¥½åŠæ³•ï¼Ÿ",
        "ä½ çš„æ„Ÿæƒ…æ˜¯å¦å®¹æ˜“å—åˆ°ä¼¤å®³ï¼Ÿ",
        "ä½ æƒ³æœç”¨æœ‰å¥‡ç‰¹æ•ˆæœæˆ–æ˜¯æœ‰å±é™©æ€§çš„è¯ç‰©ä¹ˆï¼Ÿ",
        "ä½ æ˜¯å¦æ—¶å¸¸æ„Ÿåˆ°\"æå…¶åŒçƒ¦\"ï¼Ÿ",
        "ä½ æ›¾å¤šå ã€å¤šå¾—åˆ«äººçš„ä¸œè¥¿(ç”šè‡³æ˜¯ä¸€é’ˆä¸€çº¿)å—ï¼Ÿ",
        "å¦‚æœæ¡ä»¶å…è®¸ï¼Œä½ å–œæ¬¢ç»å¸¸å¤–å‡ºï¼ˆæ—…è¡Œï¼‰ä¹ˆï¼Ÿ",
        "å¯¹ä½ æ‰€å–œæ¬¢çš„äººï¼Œä½ æ˜¯å¦ä¸ºå–ä¹å¼€è¿‡è¿‡å¤´çš„ç©ç¬‘ä¹ˆï¼Ÿ",
        "ä½ æ˜¯å¦å¸¸å› \"è‡ªç½ªæ„Ÿ\"è€Œçƒ¦æ¼ï¼Ÿ",
        "ä½ æ˜¯å¦è°ˆè®ºä¸€äº›ä½ è‡ªå·±æ¯«æ— æ‰€çŸ¥çš„äº‹æƒ…ï¼Ÿ",
        "ä½ æ˜¯å¦å®æ„¿çœ‹äº›ä¹¦è€Œä¸æƒ³å»ä¼šè§åˆ«äººï¼Ÿ",
        "æœ‰åäººæƒ³è¦å®³ä½ ä¹ˆï¼Ÿ",
        "ä½ è®¤ä¸ºè‡ªå·±\"ç¥ç»è¿‡æ•\"å—ï¼Ÿ",
        "ä½ çš„æœ‹å‹å¤šå—ï¼Ÿ",
        "ä½ æ˜¯ä¸ªå¿§è™‘é‡é‡çš„äººå—ï¼Ÿ",
        "ä½ åœ¨å„¿ç«¥æ—¶ä»£æ˜¯å¦ç«‹å³å¬ä»å¤§äººçš„å©å’è€Œæ¯«æ— æ€¨è¨€å—ï¼Ÿ",
        "ä½ æ˜¯ä¸€ä¸ªæ— å¿§æ— è™‘ï¼Œé€é¥è‡ªåœ¨çš„äººå—ï¼Ÿ",
        "æœ‰ç¤¼è²Œã€çˆ±æ•´æ´å¯¹ä½ å¾ˆé‡è¦å—ï¼Ÿ",
        "ä½ æ˜¯å¦æ‹…å¿ƒå°†ä¼šå‘ç”Ÿå¯æ€•çš„äº‹æƒ…ï¼Ÿ",
        "åœ¨ç»“è¯†æ–°æœ‹å‹æ—¶ä½ é€šå¸¸æ˜¯ä¸»åŠ¨çš„å—ï¼Ÿ",
        "ä½ è§‰å¾—è‡ªå·±æ˜¯ä¸€ä¸ªéå¸¸æ•æ„Ÿçš„äººå—ï¼Ÿ",
        "å’Œåˆ«äººåœ¨ä¸€èµ·çš„æ—¶å€™ä½ æ˜¯å¦ä¸å¸¸è¯´è¯ï¼Ÿ",
        "ä½ æ˜¯å¦è§‰å¾—ç»“å©šæ˜¯ä¸ªæ¡†æ¡†ï¼Œåº”è¯¥åºŸé™¤ï¼Ÿ",
        "ä½ æœ‰æ—¶æœ‰ç‚¹è‡ªå¹è‡ªæ“‚å—ï¼Ÿ",
        "åœ¨ä¸€ä¸ªæ²‰é—·çš„åœºåˆï¼Œä½ èƒ½ç»™å¤§å®¶æ·»ç‚¹ç”Ÿæ°”å—ï¼Ÿ",
        "æ…¢è…¾è…¾å¼€è½¦çš„å¸æœºæ˜¯å¦ä½¿ä½ è®¨åŒï¼Ÿ",
        "ä½ æ‹…å¿ƒè‡ªå·±çš„å¥åº·å—ï¼Ÿ",
        "ä½ æ˜¯å¦å–œæ¬¢è¯´ç¬‘è¯å’Œè°ˆè®ºæœ‰è¶£çš„äº‹æƒ…ï¼Ÿ",
        "ä½ æ˜¯å¦è§‰å¾—å¤§å¤šæ•°äº‹æƒ…å¯¹ä½ æ¥è¯´éƒ½æ˜¯æ— æ‰€è°“çš„ï¼Ÿ",
        "ä½ å°æ—¶å€™æ˜¯å¦æœ‰è¿‡å¯¹å¾…çˆ¶æ¯é²è½ã€æ— ç¤¼çš„è¡Œä¸ºå—ï¼Ÿ",
        "ä½ å–œæ¬¢å’Œåˆ«äººæ‰“æˆä¸€ç‰‡ã€æ•´å¤©ç›¸å¤„åœ¨ä¸€èµ·å—ï¼Ÿ",
        "ä½ å¤±çœ å—ï¼Ÿ",
        "ä½ é¥­å‰å¿…å®šå…ˆæ´—æ‰‹å—ï¼Ÿ",
        "å½“åˆ«äººé—®ä½ è¯æ—¶ä½ æ˜¯å¦å¯¹ç­”å¦‚æµï¼Ÿ",
        "ä½ æ˜¯å¦å®æ„¿æœ‰å¯Œè£•æ—¶é—´è€Œæ—©ç‚¹åŠ¨èº«å»èµ´çº¦ä¼šå—ï¼Ÿ",
        "ä½ ç»å¸¸æ— ç¼˜æ— æ•…æ„Ÿåˆ°ç–²å€¦æˆ–æ— ç²¾æ‰“é‡‡å—ï¼Ÿ",
        "åœ¨æ¸¸æˆæˆ–æ‰“ç‰Œæ—¶ä½ ç»å¸¸ä½œå¼Šå—ï¼Ÿ",
        "ä½ å–œæ¬¢ç´§å¼ çš„å·¥ä½œå—ï¼Ÿ",
        "ä½ æ—¶å¸¸è§‰å¾—è‡ªå·±çš„ç”Ÿæ´»å¾ˆå•è°ƒå—ï¼Ÿ",
        "ä½ æ›¾ç»ä¸ºäº†è‡ªå·±è€Œåˆ©ç”¨è¿‡åˆ«äººå—ï¼Ÿ",
        "ä½ æ˜¯å¦å‚åŠ çš„æ´»åŠ¨å¤ªå¤šè€Œè¶…è¿‡è‡ªå·±å¯èƒ½åˆ†é…çš„æ—¶é—´ï¼Ÿ",
        "ä½ æ˜¯å¦æœ‰é‚£ä¹ˆå‡ ä¸ªäººæ—¶å¸¸èº²ç€ä½ ?",
        "ä½ æ˜¯å¦è®¤ä¸ºäººä»¬ä¸ºä¿éšœè‡ªå·±çš„å°†æ¥è€Œç²¾æ‰“ç»†ç®—å‹¤ä¿­æ—¶é—´å¤ªå¤šäº†ï¼Ÿ",
        "ä½ æ˜¯å¦æ›¾ç»æƒ³è¿‡å»æ­»å—ï¼Ÿ",
        "è‹¥ä½ ç¡®çŸ¥ä¸ä¼šè¢«å‘ç°æ—¶ä½ ä¼šå°‘ä»˜ç»™äººå®¶é’±å—ï¼Ÿ",
        "ä½ èƒ½ä½¿ä¸€ä¸ªè”æ¬¢ä¼šå¼€æˆåŠŸå—ï¼Ÿ",
        "ä½ æ˜¯å¦å°½åŠ›ä½¿è‡ªå·±ä¸ç²—é²ï¼Ÿ",
        "ä¸€ä»¶ä½¿ä½ ä¸ºéš¾çš„äº‹æƒ…è¿‡å»ä¹‹åæ˜¯å¦ä¼šä½¿ä½ çƒ¦æ¼å¥½ä¹…ï¼Ÿ",
        "ä½ æ˜¯å¦åšæŒè¦æŒ‰ç…§ä½ çš„æƒ³æ³•åŠäº‹ï¼Ÿ",
        "å½“ä½ å»ä¹˜ç«è½¦æ—¶ï¼Œä½ æ˜¯å¦ä¼šæœ€åä¸€åˆ†é’Ÿåˆ°è¾¾ï¼Ÿ",
        "ä½ æ˜¯å¦ç¥ç»è´¨ï¼Ÿ",
        "ä½ å¸¸æ„Ÿåˆ°å¯‚å¯å—ï¼Ÿ",
        "ä½ çš„è¨€è¡Œæ€»æ˜¯ä¸€è‡´çš„å—ï¼Ÿ",
        "ä½ æœ‰æ—¶å–œæ¬¢ç©å¼„åŠ¨ç‰©å—ï¼Ÿ",
        "æœ‰äººå¯¹ä½ æˆ–ä½ çš„å·¥ä½œå¹æ¯›æ±‚ç–µæ—¶ï¼Œæ˜¯å¦å®¹æ˜“ä¼¤å®³ä½ çš„ç§¯ææ€§ï¼Ÿ",
        "ä½ å»èµ´çº¦ä¼šæˆ–ä¸Šç­æ—¶ï¼Œæ›¾å¦è¿Ÿåˆ°ï¼Ÿ",
        "ä½ æ˜¯å¦å–œæ¬¢åœ¨ä½ çš„å‘¨å›´æœ‰è®¸å¤šçƒ­é—¹å’Œé«˜å…´çš„äº‹æƒ…ï¼Ÿ",
        "ä½ æ„¿æ„è®©åˆ«äººæ€•ä½ å—ï¼Ÿ",
        "ä½ æ˜¯å¦æœ‰æ—¶å…´è‡´å‹ƒå‹ƒï¼Œæœ‰æ—¶å´å¾ˆæ…µæ‡’ä¸æƒ³åŠ¨å¼¹ï¼Ÿ",
        "ä½ æœ‰æ—¶ä¼šæŠŠä»Šå¤©åº”åšçš„äº‹æƒ…æ‹–åˆ°æ˜å¤©å—ï¼Ÿ",
        "åˆ«äººæ˜¯å¦è®¤ä¸ºä½ æ˜¯ç”Ÿæ°”å‹ƒå‹ƒçš„ï¼Ÿ",
        "åˆ«äººæ˜¯å¦å¯¹ä½ è¯´è¿‡è®¸å¤šè°è¯ï¼Ÿ",
        "ä½ æ˜¯å¦å¯¹æœ‰äº›äº‹æƒ…æ˜“æ€§æ€¥ç”Ÿæ°”ï¼Ÿ",
        "è‹¥ä½ æœ‰é”™è¯¯ï¼Œæ˜¯å¦æ„¿æ„æ‰¿è®¤ï¼Ÿ",
        "ä½ æ˜¯ä¸€ä¸ªæ•´æ´ä¸¥è°¨ï¼Œæœ‰æ¡ä¸ç´Šçš„äººå—ï¼Ÿ",
        "åœ¨å…¬å›­é‡Œæˆ–é©¬è·¯ä¸Šï¼Œä½ æ˜¯å¦æ€»æŠŠæœçš®æˆ–åºŸçº¸æ‰”åˆ°åƒåœ¾ç®±é‡Œï¼Ÿ",
        "é‡åˆ°ä¸ºéš¾çš„äº‹æƒ…ï¼Œä½ æ˜¯å¦æ‹¿ä¸å®šä¸»æ„ï¼Ÿ",
        "ä½ æ˜¯å¦æœ‰è¿‡éšå£éª‚äººçš„æ—¶å€™ï¼Ÿ",
        "è‹¥ä½ ä¹˜è½¦æˆ–åé£æœºå¤–å‡ºæ—¶ï¼Œä½ æ˜¯å¦æ‹…å¿ƒä¼šç¢°æ’æˆ–å‡ºæ„å¤–ï¼Ÿ",
        "ä½ æ˜¯ä¸€ä¸ªçˆ±äº¤å¾€çš„äººå—ï¼Ÿ"
    ];

    // ----- è¯„åˆ†è§„åˆ™ (é¢˜å·ä»1å¼€å§‹) -----
    const scoring = {
        E: { yes: [1,5,9,13,16,22,29,32,35,40,43,46,49,53,56,61,72,76,85], no: [26,37] },
        N: { yes: [3,6,11,14,18,20,24,28,30,34,36,42,47,51,54,59,63,66,67,70,74,78,82,84], no: [] },
        P: { yes: [19,23,27,38,41,44,57,58,65,69,73,77], no: [2,8,10,17,33,50,62,80] },
        L: { yes: [12,31,48,68,79,81], no: [4,7,15,21,25,39,45,52,55,60,64,71,75,83] }
    };

    const scoringSets = {};
    for (let scale in scoring) {
        scoringSets[scale] = {
            yes: new Set(scoring[scale].yes),
            no: new Set(scoring[scale].no)
        };
    }

    // ----- çŠ¶æ€ -----
    let currentIndex = 0;
    const answers = new Array(85).fill(null);

    // DOM å…ƒç´ 
    const qNumberDiv = document.getElementById('questionNumber');
    const qTextDiv = document.getElementById('questionText');
    const radioYes = document.querySelector('input[value="yes"]');
    const radioNo = document.querySelector('input[value="no"]');
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');
    const resetBtn = document.getElementById('resetBtn');
    const singleContainer = document.getElementById('singleQuestionContainer');
    const passwordContainer = document.getElementById('passwordContainer');
    const resultPanel = document.getElementById('resultPanel');
    const passwordInput = document.getElementById('passwordInput');
    const submitPasswordBtn = document.getElementById('submitPasswordBtn');
    const passwordError = document.getElementById('passwordError');
    const scoreCardsDiv = document.getElementById('scoreCards');
    const datetimeDisplay = document.getElementById('datetimeDisplay');
    const interpretDiv = document.getElementById('interpretText');
    const extraWarning = document.getElementById('extraWarning');
    const guide = document.querySelector('.guide');

    // æˆªå›¾æŒ‰é’®
    const screenshotBtn = document.getElementById('screenshotBtn');

    // ----- è¾…åŠ©å‡½æ•° -----
    function updateQuestionDisplay() {
        qNumberDiv.textContent = `ç¬¬ ${currentIndex+1} / 85 é¢˜`;
        qTextDiv.textContent = questions[currentIndex];
        radioYes.checked = false;
        radioNo.checked = false;
        const saved = answers[currentIndex];
        if (saved === 'yes') radioYes.checked = true;
        else if (saved === 'no') radioNo.checked = true;
        prevBtn.disabled = (currentIndex === 0);
        updateNextButtonState();
    }

    function updateNextButtonState() {
        if (currentIndex === 84) {
            nextBtn.disabled = false;
        } else {
            nextBtn.disabled = (answers[currentIndex] === null);
        }
    }

    function saveCurrentAnswer() {
        if (radioYes.checked) answers[currentIndex] = 'yes';
        else if (radioNo.checked) answers[currentIndex] = 'no';
    }

    function goToIndex(index) {
        if (index < 0 || index >= 85) return;
        saveCurrentAnswer();
        currentIndex = index;
        updateQuestionDisplay();
    }

    function goToNext() {
        if (currentIndex < 84) {
            if (answers[currentIndex] === null) {
                alert('è¯·å…ˆå›ç­”å½“å‰é¢˜ç›®');
                return;
            }
            goToIndex(currentIndex + 1);
        } else if (currentIndex === 84) {
            if (answers[84] !== null) {
                finishTest();
            } else {
                alert('è¯·å›ç­”æœ€åä¸€é¢˜');
            }
        }
    }

    function goToPrev() {
        if (currentIndex > 0) {
            goToIndex(currentIndex - 1);
        }
    }

    function allAnswered() {
        return answers.every(ans => ans !== null);
    }

    // å®Œæˆæµ‹è¯•ï¼šéšè—é¢˜ç›®å¡ç‰‡ï¼Œæ˜¾ç¤ºå¯†ç å¡ç‰‡ï¼ŒåŒæ—¶éšè—æŒ‡å¯¼è¯­
    function finishTest() {
        if (!allAnswered()) {
            const missing = answers.reduce((acc, ans, idx) => ans === null ? acc.concat(idx+1) : acc, []);
            alert(`è¿˜æœ‰ ${missing.length} é¢˜æœªå›ç­”ï¼Œè¯·è¿”å›å®Œæˆã€‚`);
            goToIndex(missing[0]-1);
            return;
        }

        singleContainer.classList.add('hidden');
        passwordContainer.classList.remove('hidden');
        resultPanel.classList.add('hidden');

        // éšè—æŒ‡å¯¼è¯­
        if (guide) guide.style.display = 'none';

        passwordInput.value = '';
        passwordError.textContent = '';
    }

    function computeScores() {
        const scores = { E:0, N:0, P:0, L:0 };
        for (let i = 0; i < 85; i++) {
            const ans = answers[i];
            const qNum = i + 1;
            for (let scale in scores) {
                const sets = scoringSets[scale];
                if (ans === 'yes' && sets.yes.has(qNum)) scores[scale] += 1;
                else if (ans === 'no' && sets.no.has(qNum)) scores[scale] += 1;
            }
        }
        return scores;
    }

    function renderResults(scores) {
        // å¡«å……å¾—åˆ†å¡ç‰‡
        scoreCardsDiv.innerHTML = `
            <div class="score-card"><div class="score-label">E</div><div class="score-value">${scores.E}</div><div>å¤–å‘-å†…å‘</div></div>
            <div class="score-card"><div class="score-label">N</div><div class="score-value">${scores.N}</div><div>ç¥ç»è´¨</div></div>
            <div class="score-card"><div class="score-label">P</div><div class="score-value">${scores.P}</div><div>ç²¾ç¥è´¨</div></div>
            <div class="score-card"><div class="score-label">L</div><div class="score-value">${scores.L}</div><div>æ©é¥°æ€§</div></div>
        `;

        // æ—¥æœŸæ—¶é—´
        const now = new Date();
        const year = now.getFullYear();
        const month = String(now.getMonth() + 1).padStart(2, '0');
        const day = String(now.getDate()).padStart(2, '0');
        const hours = String(now.getHours()).padStart(2, '0');
        const minutes = String(now.getMinutes()).padStart(2, '0');
        datetimeDisplay.textContent = `ğŸ“… ç­”é¢˜æ—¶é—´ï¼š${year}-${month}-${day} ${hours}:${minutes}`;

        // è§£é‡Šæ–‡æœ¬
        let interp = '';
        if (scores.E > 15) {
            interp += 'ğŸ”¹ <strong>Eé‡è¡¨ (å¤–å‘)ï¼š</strong>åˆ†æ•°é«˜äº15ï¼Œè¡¨ç¤ºäººæ ¼å¤–å‘ï¼Œå¯èƒ½æ˜¯å¥½äº¤é™…ï¼Œæ¸´æœ›åˆºæ¿€å’Œå†’é™©ï¼Œæƒ…æ„Ÿæ˜“äºå†²åŠ¨ã€‚';
        } else if (scores.E < 8) {
            interp += 'ğŸ”¹ <strong>Eé‡è¡¨ (å†…å‘)ï¼š</strong>åˆ†æ•°ä½äº8ï¼Œè¡¨ç¤ºäººæ ¼å†…å‘ï¼Œå¦‚å¥½é™ï¼Œå¯Œäºå†…çœï¼Œä¸å–œæ¬¢åˆºæ¿€ï¼Œå–œæ¬¢æœ‰ç§©åºçš„ç”Ÿæ´»æ–¹å¼ï¼Œæƒ…ç»ªæ¯”è¾ƒç¨³å®šã€‚';
        } else {
            interp += `ğŸ”¹ <strong>Eé‡è¡¨ (ä¸­é—´å‹)ï¼š</strong>å¾—åˆ† ${scores.E} åœ¨8-15ä¹‹é—´ï¼Œæ€§æ ¼å€¾å‘ä¸æ˜æ˜¾ï¼Œå…¼å…·å†…å¤–å‘ç‰¹å¾ã€‚`;
        }

        if (scores.N > 14) {
            interp += '<br>ğŸ”¹ <strong>Né‡è¡¨ (æƒ…ç»ªä¸ç¨³å®š)ï¼š</strong>åˆ†æ•°é«˜äº14ï¼Œè¡¨ç¤ºç„¦è™‘ã€å¿§å¿ƒå¿¡å¿¡ã€å¸¸éƒéƒä¸ä¹ï¼Œæœ‰å¼ºçƒˆæƒ…ç»ªååº”ï¼Œç”šè‡³å‡ºç°ä¸å¤Ÿç†æ™ºçš„è¡Œä¸ºã€‚';
        } else if (scores.N < 9) {
            interp += '<br>ğŸ”¹ <strong>Né‡è¡¨ (æƒ…ç»ªç¨³å®š)ï¼š</strong>åˆ†æ•°ä½äº9ï¼Œè¡¨ç¤ºæƒ…ç»ªç¨³å®šã€‚';
        } else {
            interp += `<br>ğŸ”¹ <strong>Né‡è¡¨ (æƒ…ç»ªæ€§ä¸­ç­‰)ï¼š</strong>å¾—åˆ† ${scores.N} åœ¨9-14ä¹‹é—´ï¼Œæƒ…ç»ªååº”é€‚åº¦ã€‚`;
        }

        if (scores.P > 8) {
            interp += '<br>ğŸ”¹ <strong>Pé‡è¡¨ (ç²¾ç¥è´¨å€¾å‘)ï¼š</strong>åˆ†æ•°é«˜äº8ï¼Œè¡¨ç¤ºå¯èƒ½æ˜¯å­¤ç‹¬ã€ä¸å…³å¿ƒä»–äººï¼Œéš¾ä»¥é€‚åº”å¤–éƒ¨ç¯å¢ƒï¼Œä¸è¿‘äººæƒ…ï¼Œä¸åˆ«äººä¸å‹å¥½ï¼Œå–œæ¬¢å¯»è¡…æ…æ‰°ï¼Œå–œæ¬¢å¹²å¥‡ç‰¹çš„äº‹æƒ…ï¼Œå¹¶ä¸”ä¸é¡¾å±é™©ã€‚';
        } else {
            interp += `<br>ğŸ”¹ <strong>Pé‡è¡¨ (æ­£å¸¸èŒƒå›´)ï¼š</strong>å¾—åˆ† ${scores.P} â‰¤8ï¼Œæ— æ˜¾è‘—ç²¾ç¥è´¨å€¾å‘ã€‚`;
        }

        let lWarning = '';
        if (scores.L > 18) {
            interp += '<br>ğŸ”¹ <strong>Lé‡è¡¨ (é«˜æ©é¥°æ€§)ï¼š</strong>åˆ†æ•°é«˜äº18ï¼Œæ˜¾ç¤ºè¢«è¯•æœ‰æ©é¥°å€¾å‘ï¼Œæµ‹éªŒç»“æœå¯èƒ½å¤±çœŸã€‚';
            lWarning = 'âš ï¸ Låˆ†é«˜äº18ï¼Œç»“æœå¯èƒ½å—æ©é¥°å½±å“ï¼Œè§£é‡Šéœ€è°¨æ…ã€‚';
        } else {
            interp += `<br>ğŸ”¹ <strong>Lé‡è¡¨ (è¯šå®åº¦æ­£å¸¸)ï¼š</strong>å¾—åˆ† ${scores.L} â‰¤18ï¼Œå›ç­”ç›¸å¯¹çœŸå®ã€‚`;
        }

        interpretDiv.innerHTML = interp;
        extraWarning.innerHTML = lWarning;

        // æ·»åŠ å‚è€ƒç•Œé™è„šæ³¨
        const ref = document.createElement('p');
        ref.style.marginTop = '16px';
        ref.style.background = '#ddeeff';
        ref.style.padding = '10px 14px';
        ref.style.borderRadius = '24px';
        ref.innerHTML = 'ğŸ“˜ <strong>å‚è€ƒç•Œé™ï¼š</strong>E: å¤–å‘>15ï¼Œå†…å‘<8ï¼›N: ä¸ç¨³å®š>14ï¼Œç¨³å®š<9ï¼›P: ç²¾ç¥è´¨>8ï¼›L: æ©é¥°>18ã€‚';
        interpretDiv.appendChild(ref);

        // æ˜¾ç¤ºç»“æœé¢æ¿ï¼ˆæŒ‡å¯¼è¯­å·²éšè—ï¼‰
        resultPanel.classList.remove('hidden');
    }

    function handlePasswordSubmit() {
        const entered = passwordInput.value.trim();
        if (entered === RESULT_PASSWORD) {
            passwordContainer.classList.add('hidden');
            const scores = computeScores();
            renderResults(scores);
        } else {
            passwordError.textContent = 'âŒ å¯†ç é”™è¯¯ï¼Œè¯·é‡æ–°è¾“å…¥';
            passwordInput.value = '';
            passwordInput.focus();
        }
    }

    function resetTest() {
        for (let i = 0; i < 85; i++) answers[i] = null;
        currentIndex = 0;
        updateQuestionDisplay();
        singleContainer.classList.remove('hidden');
        passwordContainer.classList.add('hidden');
        resultPanel.classList.add('hidden');

        // æ¢å¤æŒ‡å¯¼è¯­æ˜¾ç¤º
        if (guide) guide.style.display = 'block';

        passwordError.textContent = '';
        passwordInput.value = '';
    }

    // æˆªå›¾åŠŸèƒ½
    screenshotBtn.addEventListener('click', function() {
        const element = document.getElementById('captureArea');
        html2canvas(element, { scale: 2, backgroundColor: '#ffffff' }).then(canvas => {
            const link = document.createElement('a');
            link.download = `EPQç»“æœ_${new Date().toISOString().slice(0,10)}.png`;
            link.href = canvas.toDataURL('image/png');
            link.click();
        }).catch(err => {
            alert('æˆªå›¾å¤±è´¥ï¼Œå¯å°è¯•æ‰‹åŠ¨æˆªå›¾ã€‚');
            console.error(err);
        });
    });

    // äº‹ä»¶ç»‘å®š
    document.querySelectorAll('input[name="single"]').forEach(radio => {
        radio.addEventListener('change', function() {
            saveCurrentAnswer();
            if (currentIndex < 84) {
                setTimeout(() => { goToNext(); }, 100);
            } else if (currentIndex === 84) {
                if (answers[84] !== null) finishTest();
            }
            updateNextButtonState();
        });
    });

    prevBtn.addEventListener('click', goToPrev);
    nextBtn.addEventListener('click', function() {
        if (answers[currentIndex] === null) {
            alert('è¯·å…ˆå›ç­”å½“å‰é¢˜ç›®');
            return;
        }
        goToNext();
    });
    resetBtn.addEventListener('click', resetTest);
    submitPasswordBtn.addEventListener('click', handlePasswordSubmit);
    // å›è½¦ç¡®è®¤å¯†ç 
    passwordInput.addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
            e.preventDefault();
            handlePasswordSubmit();
        }
    });

    // åˆå§‹åŒ–
    resetTest();
})();
</script>
</body>
</html>
